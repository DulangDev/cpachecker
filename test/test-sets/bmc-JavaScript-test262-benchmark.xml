<?xml version="1.0"?>
<!DOCTYPE benchmark PUBLIC "+//IDN sosy-lab.org//DTD BenchExec benchmark 1.0//EN"
        "http://www.sosy-lab.org/benchexec/benchmark-1.0.dtd">
<benchmark tool="cpachecker" timelimit="900 s" hardtimelimit="1000 s" memlimit="4000 MB"
           cpuCores="2">
    <!--
        Download and generate task definition files:
            git clone https://github.com/tc39/test262 test/programs/javascript-test262-benchmark
            git checkout af984c01f6f89d46bc0789af70c599c88c033d0b
            rm -rf test/programs/javascript-test262-benchmark/.git
            rm -rf test/programs/javascript-test262-benchmark/.gitignore
            python3 test/scripts/generate-javascript-test262-benchmark-task-definition-files.py
        Run this benchmark:
            scripts/benchmark.py test/test-sets/bmc-JavaScript-test262-benchmark.xml
    -->


    <option name="-noout"/>
    <option name="-heap">300M</option>

    <rundefinition>
        <option name="-bmc-JavaScript"/>
    </rundefinition>

    <tasks>
        <!-- MathSAT runs much faster than Z3 in these cases -->
        <option name="-setprop">cpa.loopbound.maxLoopIterations=1</option>
        <option name="-setprop">cpa.predicate.js.maxFieldNameCount=30</option>

        <include>../programs/javascript-test262-benchmark/test/language/expressions/bitwise-*/*.yml</include>
        <include>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A1.1_T1*.yml</include>
        <include>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A1.1_T2*.yml</include>

        <propertyfile>../config/specification/JavaScriptAssertion.spc</propertyfile>
    </tasks>

    <tasks>
        <option name="-setprop">solver.solver=z3</option>
        <option name="-setprop">cpa.loopbound.maxLoopIterations=1</option>
        <option name="-setprop">cpa.predicate.js.maxFieldNameCount=15</option>

        <!-- uses NaN => Number has to be encoded as float (not rational) -->
        <!-- IllegalArgumentException: MathSAT returned null  =>  use Z3 -->
        <!-- TODO runs really slow -->
        <include>../programs/javascript-test262-benchmark/test/language/statements/for/12.6.3_2-3-a-ii-14*.yml</include>

        <propertyfile>../config/specification/JavaScriptAssertion.spc</propertyfile>
    </tasks>

    <tasks>
        <option name="-setprop">solver.solver=z3</option>
        <option name="-setprop">cpa.loopbound.maxLoopIterations=11</option>
        <option name="-setprop">cpa.predicate.js.maxFieldNameCount=30</option>
        <!-- approximation of floats as rational runs faster and is sufficient precise -->
        <option name="-setprop">cpa.predicate.encodeFloatAs=rational</option>
        <!-- TODO this option should be removed as soon as NaN and float interpolation can be used together -->
        <option name="-setprop">cpa.predicate.js.useNaN=false</option>


        <include>../programs/javascript-test262-benchmark/test/language/statements/*/*.yml</include>

        <!-- requires float semantic, since NaN is used => see other tasks tags (different configuration) -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A1.1_T1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A1.1_T2*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/for/12.6.3_2-3-a-ii-14*.yml</exclude>

        <!-- unreachable negated error -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T1_0.1_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T1_0.2_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T1_0.3_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T1_0.4_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T2_0.1_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T2_0.2_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T2_0.3_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T2_0.4_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T3_0.1_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T3_0.2_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T4_0.2_false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A12_T4_0.3_false.yml</exclude>

        <!-- default parameters are not supported yet -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/scope-paramsbody-var-open*.yml</exclude>

        <!-- only syntax checks -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/*/let-block-with-newline*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/*/let-identifier-with-newline*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/variable/arguments-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13.2_A8_T1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13.2_A8_T2*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/labeled/value-await-non-module-escaped*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/param-arguments-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/variable/arguments-fn-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/empty/S12.3_A1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13.2.1_A1_T1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/variable/eval-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/param-eval-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/line-terminator-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/line-terminator-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/name-arguments-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/labeled/value-await-non-module*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/param-duplicated-non-strict*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/labeled/value-yield-non-strict-escaped*.yml</exclude>


        <!-- recursion is not supported yet -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/dflt-params-trailing-comma*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/params-trailing-comma-multiple*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/params-trailing-comma-single*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13.2.2_A8_T3*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13_A3_T1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13_A3_T2*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13_A3_T3*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13_A9*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S14_A2*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/S12.11_A1_T4*.yml</exclude>

        <!-- TODO $ERROR in else case -->
        <!--<exclude>../programs/javascript-test262-benchmark/test/language/statements/if/S12.5_A10_T1_false.yml</exclude>-->

        <!-- TODO $ERROR not reached -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/do-while/S12.6.1_A4_T5_*false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/while/S12.6.2_A4_T5_*false.yml</exclude>

        <!-- TODO string concat -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13.2.2_A8_T2*.yml</exclude>

        <!-- TODO Array sort and toString -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13.2.1_A5_T1*.yml</exclude>

        <!-- TODO Timeout -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/return/12.9-1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/for/S12.6.3_A14*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/for/S12.6.3_A15_*false.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/for/scope-body-lex-boundary*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/S12.11_A1_T1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/S12.11_A1_T3*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/while/S12.6.2_A1.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/while/S12.6.2_A1_*false.yml</exclude>

        <!-- TODO values to convert ToInt32 out of range are not handled correctly yet -->
        <exclude>../programs/javascript-test262-benchmark/test/language/expressions/bitwise-not/S9.5_A2.1_T2.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/expressions/bitwise-not/S9.5_A2.2_T2.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/expressions/bitwise-not/S9.5_A2.3_T2.yml</exclude>

        <!-- TODO function name contains unicode -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S14_A5_T1*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S14_A5_T2*.yml</exclude>

        <!-- TODO function arguments variable -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13_A15_T4*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/function/S13_A15_T5*.yml</exclude>

        <!-- TODO let scope -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/for/scope-body-lex-open*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/block/scope-lex-close*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/scope-lex-close-case*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/block/scope-lex-open*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/scope-lex-open-case*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/scope-lex-open-dflt*.yml</exclude>
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/switch/scope-lex-close-dflt*.yml</exclude>

        <!-- TODO global object assignment -->
        <exclude>../programs/javascript-test262-benchmark/test/language/statements/variable/S12.2_A11*.yml</exclude>

        <!--<propertyfile>../../config/specification/JavaScriptAssertion.spc</propertyfile>-->
        <propertyfile>../config/specification/JavaScriptAssertion.spc</propertyfile>
    </tasks>
</benchmark>
